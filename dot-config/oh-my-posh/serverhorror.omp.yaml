# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json

version: 3
final_space: true
# palette:
#   black: "#262B44"
#   blue: "#4B95E9"
#   green: "#59C9A5"
#   orange: "#F07623"
#   red: "#D81E5B"
#   white: "#E0DEF4"
#   yellow: "#F3AE35"
blocks:
  # - type: prompt
  #   alignment: right
  #   segments:
  #     - type: time
  #       alignment: right
  #       style: plain
  #       background: transparent
  #       foreground: 'lightWhite'

  # begin: preamble
  # * all info on a separate line
  # * right-aligned
  # * first block is just to get a separate line
  - type: prompt
    newline: true
    segments:
      - type: text
        template: "Î©"
        alignment: left
        style: plain
  - type: prompt
    alignment: right
    newline: true
    segments:
      - type: executiontime
        alignment: left
        style: plain
        # foreground: red
        # foreground: 'lightWhite'
        foreground_templates:
          - "{{- if gt .Ms 1000 }}red{{ end -}}"
        template: "{{.FormattedMs}} âŒ›"
        properties:
          threshold: 500
  - type: prompt
    alignment: right
    newline: true
    segments:
      - type: docker
        template: "{{ .Context }} ïŒˆ"
  - type: prompt
    alignment: right
    newline: true
    segments:
      - type: aws
        template: "{{.Profile}}{{if .Region}}@{{.Region}}{{end}} î­"
  - type: prompt
    alignment: right
    newline: true
    segments:
      - type: azure
        template: "{{ .Name }} î¯˜"
  - type: prompt
    alignment: right
    newline: true
    segments:
      - type: go
        template: "{{ .Full }} î˜§"
  - type: prompt
    alignment: right
    newline: true
    segments:
      - type: python
        template: "{{ .Full }} îˆµ"
  - type: prompt
    alignment: right
    newline: true
    segments:
      - type: git
        style: plain
        # foreground: 'gray'
        background: transparent
        templates_logic: "merge"
        foreground_templates:
          - "{{- if gt .Ahead 0 }}yellow{{ end -}}"
          - "{{- if gt .Behind 0 }}red{{ end -}}"
          - "{{- if gt .Working.Untracked 0 }}yellow{{ end -}}"
          - "{{- if or (.Working.Changed) (.Staging.Changed) ( gt .StashCount 0) (.Detached) -}}red{{- end -}}"
          - "green"
        template: >-
          {{- if gt .Ahead 0 }}({{ .Ahead }}â‡¡){{ end -}}
          {{- if gt .Behind 0 }}({{ .Behind }}â‡£){{ end -}}
          {{- if gt .StashCount 0 }}({{ .StashCount }}âš‘){{ end -}}

          {{- if gt .Working.Untracked 0 }}(ğŸ’©{{ .Working.Untracked }}??){{ end -}}
          {{- if gt .Working.Modified 0 }}(ğŸ’©{{ .Working.Modified }}M){{ end -}}

          {{- concat .Commit.Refs.Heads .Commit.Refs.Tags | join ", " | printf "(%v)" -}}

          {{- printf "(%v)" .User.Email -}}

          {{- printf " %v" .UpstreamIcon -}}
        properties:
          branch_icon: "îœ¥ "
          commit_icon: "ó°œ›"
          fetch_status: true
          fetch_upstream_icon: true
          fetch_user: true
          full_branch_path: true
          git_icon: "ï‡’"
          github_icon: "ïˆ"
          mapped_branches:
            feat/*: "ğŸš€ "
            feature/*: "ğŸš€ "
            bug/*: "ğŸ› "
            bugfix/*: "ğŸ› "
            "*": "ğŸ”§ "
          upstream_icons:
            "https://bitbucket.biscrum.com/*": "ï…±"
  # end: preamble

  # begin: first block
  - type: prompt
    alignment: left
    style: plain
    segments:
      # - type: text
      #   alignment: left
      #   style: plain
      #   background: transparent
      #   template: "({{.Shell}})"
      #   properties:
      #     style: letter
      #     mapped_locations_enabled: true
      - type: path
        foreground: "lightWhite"
        background: transparent
        template: "{{.Path}}"
        properties:
          style: full
          mapped_locations_enabled: true
  # end: first block

  # begin: second block
  - type: prompt
    alignment: right
    overflow: hide
    # filler: "{{ if not .Overflow }}â€¦{{ end }}"
    padding: 1
    segments:
      - type: git
        style: plain
        # foreground: 'gray'
        background: transparent
        templates_logic: "merge"
        # foreground_templates:
        #   - "{{- if gt .Ahead 0 }}yellow{{ end -}}"
        #   - "{{- if gt .Behind 0 }}yellow{{ end -}}"
        #   - "{{- if gt .Working.Untracked 0 }}yellow{{ end -}}"
        #   - "{{- if or (.Working.Changed) (.Staging.Changed) ( gt .StashCount 0) (.Detached) -}}yellow{{- end -}}"
        #   - "green"
        template: >-
          {{- .HEAD -}}
          {{- if gt .Ahead 0 }}({{ .Ahead }}â‡¡){{ end -}}
          {{- if gt .Behind 0 }}({{ .Behind }}â‡£){{ end -}}
          {{- if gt .StashCount 0 }}({{ .StashCount }}âš‘){{ end -}}
          {{- printf " %v" .UpstreamIcon -}}
        properties:
          branch_icon: "îœ¥ "
          commit_icon: "ó°œ›"
          fetch_status: true
          fetch_upstream_icon: true
          fetch_user: true
          full_branch_path: true
          git_icon: "ï‡’"
          github_icon: "ïˆ"
          mapped_branches:
            feat/*: "ğŸš€ "
            feature/*: "ğŸš€ "
            bug/*: "ğŸ› "
            bugfix/*: "ğŸ› "
            "*": "ğŸ”§ "
          upstream_icons:
            "https://bitbucket.biscrum.com/*": "ï…±"
  # end: second block

  # begin: third block
  - type: prompt
    alignment: left
    style: plain
    newline: true
    segments:
      - type: text
        alignment: left
        style: plain
        background: transparent
        templates_logic: "first_match"
        foreground_templates:
          - "{{if gt .Code 0}}red{{end}}"
          - "lightWhite"
          # - "{{if eq .Code 0}}magenta{{end}}"
        # template: "â¯ "
        template: >-
          {{- if not (gt .Code 0) -}}
          {{- "â¯" -}}
          {{- else -}}
          <f>
            ({{- .Code -}})
            {{- "?" -}}
          </f>
          {{- end -}}
  # end: third block
transient_prompt:
  background: transparent
  foreground: "darkGray"
  template: "â¯ "
secondary_prompt:
  foreground: "lightWhite"
  background: "transparent"
  # template: "â¯â¯"
  template: "â‰«"
