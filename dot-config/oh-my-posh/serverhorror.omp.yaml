# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json

version: 3
final_space: true
# palette:
#   black: "#262B44"
#   blue: "#4B95E9"
#   green: "#59C9A5"
#   orange: "#F07623"
#   red: "#D81E5B"
#   white: "#E0DEF4"
#   yellow: "#F3AE35"
blocks:

  # - type: prompt
  #   alignment: right
  #   segments:
  #     - type: time
  #       alignment: right
  #       style: plain
  #       background: transparent
  #       foreground: 'lightWhite'

  # begin: preamble
  # * all info on a separate line
  # * right-aligned
  # * first block is just to get a separate line
  - type: prompt
    newline: true
    segments:
      - type: text
        template: "Œ©"
        alignment: left
        style: plain
  - type: prompt
    alignment: right
    newline: true
    segments:
      - type: docker
        template: "{{ .Context }} Ôåà"
  - type: prompt
    alignment: right
    newline: true
    segments:
      - type: aws
        template: "{{.Profile}}{{if .Region}}@{{.Region}}{{end}} Óû≠"
  - type: prompt
    alignment: right
    segments:
      - type: azure
        template: "{{ .Name }} ÓØò"
  - type: prompt
    alignment: right
    segments:
      - type: go
        template: "{{ .Full }} Óòß"
  - type: prompt
    alignment: right
    segments:
      - type: python
        template: "{{ .Full }} Óàµ"
  # end: preamble

  # begin: first block
  - type: prompt
    alignment: left
    style: plain
    segments:
      # - type: text
      #   alignment: left
      #   style: plain
      #   background: transparent
      #   template: "({{.Shell}})"
      #   properties:
      #     style: letter
      #     mapped_locations_enabled: true
      - type: path
        foreground: 'lightWhite'
        background: transparent
        template: "{{.Path}}"
        properties:
          style: full
          mapped_locations_enabled: true
  # end: first block

  # begin: second block
  - type: prompt
    alignment: right
    overflow: hide
    # filler: "{{ if not .Overflow }}‚Ä¶{{ end }}"
    padding: 1
    segments:
      - type: executiontime
        alignment: left
        style: plain
        # foreground: red
        foreground: 'lightWhite'
        foreground_templates:
          - "{{- if gt .Ms 1000 }}red{{ end -}}"
        template: "{{.FormattedMs}} ‚åõ "
        properties:
          threshold: 1000
      - type: git
        style: plain
        # foreground: 'gray'
        background: transparent
        templates_logic: "merge"
        foreground_templates:
          - "{{- if gt .Ahead 0 }}yellow{{ end -}}"
          - "{{- if gt .Behind 0 }}yellow{{ end -}}"
          - "{{- if or (.Working.Changed) (.Staging.Changed) ( gt .StashCount 0) (.Detached) -}}yellow{{- end -}}"
          - "green"
        # template: " ({{ .User.Email }}){{ .HEAD }}{{ if or (.Working.Changed) (.Staging.Changed) }}*{{ end }} <cyan>{{ if gt .Behind 0 }}‚á£{{ end }}{{ if gt .Ahead 0 }}‚á°{{ end }}</>"
        template: >-
          {{- if or (.Working.Changed) (.Staging.Changed) ( gt .StashCount 0) -}}üí© {{ end -}}
          {{- .HEAD -}}
          {{- /* concat .Commit.Refs.Heads .Commit.Refs.Tags | join ", " | printf " (%v)" */ -}}
          {{- printf " (%v)" .User.Email -}}
          {{- if gt .Ahead 0 }}({{ .Ahead }}‚á°){{ end -}}
          {{- if gt .Behind 0 }}({{ .Behind }}‚á£){{ end -}}
          {{- if gt .StashCount 0 }}({{ .StashCount }}‚öë){{ end -}}
          {{- printf " %v" .UpstreamIcon -}}
        properties:
          branch_icon: "Óú• "
          commit_icon: "Û∞úõ"
          fetch_status: true
          fetch_upstream_icon: true
          fetch_user: true
          full_branch_path: true
          git_icon: "Ôáí"
          github_icon: "Ôêà"
          mapped_branches:
            feat/*: "üöÄ "
            feature/*: "üöÄ "
            bug/*: "üêõ "
            bugfix/*: "üêõ "
            "*": "üîß "
          upstream_icons:
            "https://bitbucket.biscrum.com/*": "ÔÖ±"
  # end: second block

  # begin: third block
  - type: prompt
    alignment: left
    style: plain
    newline: true
    segments:
      - type: text
        alignment: left
        style: plain
        background: transparent
        templates_logic: "first_match"
        foreground_templates:
          - "{{if gt .Code 0}}red{{end}}"
          - "lightWhite"
          # - "{{if eq .Code 0}}magenta{{end}}"
        # template: "‚ùØ "
        template: >-
          {{- if not (gt .Code 0) -}}
          {{- "‚ùØ" -}}
          {{- else -}}
          <f>
            ({{- .Code -}})
            {{- "?" -}}
          </f>
          {{- end -}}
  # end: third block
transient_prompt:
  background: transparent
  foreground: "darkGray"
  template: "‚ùØ "
secondary_prompt:
  foreground: 'lightWhite'
  background: 'transparent'
  # template: "‚ùØ‚ùØ"
  template: "‚â´"

